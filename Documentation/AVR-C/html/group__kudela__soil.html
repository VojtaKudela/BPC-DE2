<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tropical plants: GPIO Library &lt;soil.h&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="stÃ¡hnout.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">Tropical plants<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Greenhouse management for tropical plants.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">GPIO Library &lt;soil.h&gt;</div></div>
</div><!--header-->
<div class="contents">

<p>Valve regulation library for AVR-GCC.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae5f624b0edb083e57d4dff2d8ab40524" id="r_gae5f624b0edb083e57d4dff2d8ab40524"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae5f624b0edb083e57d4dff2d8ab40524">SOIL_init</a> (volatile uint8_t *reg, uint8_t pin)</td></tr>
<tr class="memdesc:gae5f624b0edb083e57d4dff2d8ab40524"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize valve pin, switch valve off.  <br /></td></tr>
<tr class="separator:gae5f624b0edb083e57d4dff2d8ab40524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf93057ce62460d6275ff73c1910a623c" id="r_gaf93057ce62460d6275ff73c1910a623c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf93057ce62460d6275ff73c1910a623c">SOIL_on</a> (volatile uint8_t *reg, uint8_t pin)</td></tr>
<tr class="memdesc:gaf93057ce62460d6275ff73c1910a623c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn valve on.  <br /></td></tr>
<tr class="separator:gaf93057ce62460d6275ff73c1910a623c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e0f8432bb3bd5e06bdff274d013d0bf" id="r_ga6e0f8432bb3bd5e06bdff274d013d0bf"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga6e0f8432bb3bd5e06bdff274d013d0bf">SOIL_off</a> (volatile uint8_t *reg, uint8_t pin)</td></tr>
<tr class="memdesc:ga6e0f8432bb3bd5e06bdff274d013d0bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn valve off.  <br /></td></tr>
<tr class="separator:ga6e0f8432bb3bd5e06bdff274d013d0bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4e62fd864874ad8405890a851e8122fb" id="r_ga4e62fd864874ad8405890a851e8122fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4e62fd864874ad8405890a851e8122fb">SOIL_control</a> (volatile uint8_t *soil_reg, uint8_t soil_pin, uint8_t current_soil, uint8_t setpoint_soil, uint8_t hyst_soil)</td></tr>
<tr class="memdesc:ga4e62fd864874ad8405890a851e8122fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control valve.  <br /></td></tr>
<tr class="separator:ga4e62fd864874ad8405890a851e8122fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Valve regulation library for AVR-GCC. </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="soil_8h.html">soil.h</a>&gt;</span> </div>
<div class="ttc" id="asoil_8h_html"><div class="ttname"><a href="soil_8h.html">soil.h</a></div></div>
</div><!-- fragment --><p>The library contains functions for controlling AVRs' valve using GPIO.</p>
<dl class="section note"><dt>Note</dt><dd>Based on AVR Libc Reference Manual. </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>(c) 2024 Vojtech Kudela, MIT license </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4e62fd864874ad8405890a851e8122fb" name="ga4e62fd864874ad8405890a851e8122fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4e62fd864874ad8405890a851e8122fb">&#9670;&#160;</a></span>SOIL_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SOIL_control </td>
          <td>(</td>
          <td class="paramtype">volatile uint8_t *</td>          <td class="paramname"><span class="paramname"><em>soil_reg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>soil_pin</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>current_soil</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>setpoint_soil</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>hyst_soil</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control valve. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">soil_reg</td><td>Valve, address of Port Register, such as &amp;PORTB. </td></tr>
    <tr><td class="paramname">soil_pin</td><td>Valve, pin designation in the interval 0 to 7. </td></tr>
    <tr><td class="paramname">current_soil</td><td>Measured soil moisure value. </td></tr>
    <tr><td class="paramname">setpoint_soil</td><td>Required soil moisurevalue. </td></tr>
    <tr><td class="paramname">hyst_soil</td><td>Hysteresis of soil moisure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<p>Minimum value is required value minus hysteresis. Required value is typical value. Valve is turn on, if soil moisure is lower than minimum value or if soil moisure is lower than typical value and valve was turn on. </p>

<p class="definition">Definition at line <a class="el" href="soil_8c_source.html#l00065">65</a> of file <a class="el" href="soil_8c_source.html">soil.c</a>.</p>

</div>
</div>
<a id="gae5f624b0edb083e57d4dff2d8ab40524" name="gae5f624b0edb083e57d4dff2d8ab40524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae5f624b0edb083e57d4dff2d8ab40524">&#9670;&#160;</a></span>SOIL_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SOIL_init </td>
          <td>(</td>
          <td class="paramtype">volatile uint8_t *</td>          <td class="paramname"><span class="paramname"><em>reg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>pin</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize valve pin, switch valve off. </p>
<dl class="section user"><dt>Implementation notes:</dt><dd><ul>
<li>Connect transistor to selected pin.</li>
<li>Transistor will switch valve via relay.</li>
<li>Connect diode parallel to relay.</li>
<li>External pull-up is necessary.</li>
<li>Connect a resistor to the base of transistor</li>
<li>to limit the current. </li>
</ul>
</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>Address of Port Register, such as &amp;PORTB. </td></tr>
    <tr><td class="paramname">pin</td><td>Pin designation in the interval 0 to 7. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

<p class="definition">Definition at line <a class="el" href="soil_8c_source.html#l00020">20</a> of file <a class="el" href="soil_8c_source.html">soil.c</a>.</p>

</div>
</div>
<a id="ga6e0f8432bb3bd5e06bdff274d013d0bf" name="ga6e0f8432bb3bd5e06bdff274d013d0bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e0f8432bb3bd5e06bdff274d013d0bf">&#9670;&#160;</a></span>SOIL_off()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SOIL_off </td>
          <td>(</td>
          <td class="paramtype">volatile uint8_t *</td>          <td class="paramname"><span class="paramname"><em>reg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>pin</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn valve off. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>Address of Port Register, such as &amp;PORTB. </td></tr>
    <tr><td class="paramname">pin</td><td>Pin designation in the interval 0 to 7. <br  />
 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Set bit 0 to zero. </dd></dl>

<p class="definition">Definition at line <a class="el" href="soil_8c_source.html#l00049">49</a> of file <a class="el" href="soil_8c_source.html">soil.c</a>.</p>

</div>
</div>
<a id="gaf93057ce62460d6275ff73c1910a623c" name="gaf93057ce62460d6275ff73c1910a623c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf93057ce62460d6275ff73c1910a623c">&#9670;&#160;</a></span>SOIL_on()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SOIL_on </td>
          <td>(</td>
          <td class="paramtype">volatile uint8_t *</td>          <td class="paramname"><span class="paramname"><em>reg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>pin</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn valve on. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>Address of Port Register, such as &amp;PORTB. </td></tr>
    <tr><td class="paramname">pin</td><td>Pin designation in the interval 0 to 7. <br  />
 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Set bit 0 to one. </dd></dl>

<p class="definition">Definition at line <a class="el" href="soil_8c_source.html#l00036">36</a> of file <a class="el" href="soil_8c_source.html">soil.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
